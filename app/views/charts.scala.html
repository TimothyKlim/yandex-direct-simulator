@(b: List[(Long,Double)]) 

@main(title = "Charts", nav = "charts") {

<!-- <table>
	<tr>
		<th id="chart_div" style="height: 100%;"></th>
		<th id="chart_div2" style="height: 100%;"></th>							
	</tr>
	<tr>
		<th id="chart_div3" style="height: 100%;"></th>
		<th id="chart_div4" style="height: 100%;"></th>							
	</tr>
</table> -->

<div id="chart_div" style="width: 50%; height: 200pt;"></div>

<div id="dashboard">
      <!--Divs that will hold each control and chart-->
      <div id="chart" style="width: 50%; height: 200pt;"></div>
      <div id="control" style="width: 50%; height: 200pt;"></div>
    </div>


<script type="text/javascript">
	google.load('visualization', '1', { packages : [ 'corechart', 'controls' ] });
	google.setOnLoadCallback(drawChart);	
	
	function drawChart() {	
		//var ar_dt = [ @b.map(_._1).mkString(",") ];
		//var ar = [['Date','Budget']];
		//@for(dtb <- b) {
	    //	ar.push([new Date(@dtb._1).format("HH:MM:ss ddd"),@dtb._2]);
		//};		
		//var data = google.visualization.arrayToDataTable(ar);
		
		var data = new google.visualization.DataTable();
		data.addColumn('datetime', 'Date');
        data.addColumn('number', 'Budget');
        var ar = [];
        
        @for(dtb <- b) {
	    	ar.push([new Date(@dtb._1),@dtb._2]);
		};

		data.addRows(ar);
		
		var options = {
			title : 'Budget history',
			hAxis: {
				format: 'HH:mm:ss EEE',
				title: 'Time',
				interpolateNulls: false
			},
			vAxis: {
				title: 'Budget balance, $'
			},
			pointSize: 5	
		};

		var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
		chart.draw(data, options);
		
		/* var chart = new google.visualization.LineChart(document.getElementById('chart_div2'));
		chart.draw(data, options);
		
		var chart = new google.visualization.LineChart(document.getElementById('chart_div3'));
		chart.draw(data, options);
		
		var chart = new google.visualization.LineChart(document.getElementById('chart_div4'));
		chart.draw(data, options); */
	}
</script>


<script type="text/javascript">
	google.load('visualization', '1', { packages : [ 'controls' ] });
	google.setOnLoadCallback(drawVisualization);
	
	function drawVisualization() {
		var dashboard = new google.visualization.Dashboard(
			document.getElementById('dashboard'));

		var control = new google.visualization.ControlWrapper({
			'controlType': 'ChartRangeFilter',
		    'containerId': 'control',
		    'options': {
		    	// Filter by the date axis.
		    	'filterColumnIndex': 0,
		       	'ui': {
		         	'chartType': 'LineChart',
		         	'chartOptions': {
		           		//'chartArea': {'width': '90%'},
						'chartArea': {'height': '20%', 'width': '70%'},
		           		'hAxis': {'baselineColor': 'none'}
		         	},
		         	// Display a single series that shows the closing value of the stock.
		         	// Thus, this view has two columns: the date (axis) and the stock value (line series).
		         	'chartView': {
		           		'columns': [0, 1]
		         	},
		         	// 1 day in milliseconds = 24 * 60 * 60 * 1000 = 86,400,000
		         	'minRangeSize': 86400000
		  		}
		    },
		     // Initial range: 2012-02-09 to 2012-03-20.
			'state': {'range': {'start': new Date(@b.head._1), 'end': new Date(@b.last._1)}}
		});

		var chart = new google.visualization.ChartWrapper({
		  	'chartType': 'LineChart',
		   	'containerId': 'chart',
		    'options': {
			    // Use the same chart area width as the control for axis alignment.
		    	'title' : 'Budget history',
				'hAxis': {
					'format': 'HH:mm:ss EEE',
					'title': 'Time'
				},
				'vAxis': {
					'title': 'Budget balance, $'
				},
				'pointSize': 5
			    //'hAxis': {'slantedText': false},
			    //'vAxis': {'viewWindow': {'min': 0, 'max': 2000}},
			    //'legend': {'position': 'none'}
			}
		});

		var data = new google.visualization.DataTable();
		data.addColumn('datetime', 'Date');
	    data.addColumn('number', 'Budget');
	    var ar = [];
	        
	    @for(dtb <- b) {
		  	ar.push([new Date(@dtb._1),@dtb._2]);
		};

		data.addRows(ar);			
			
		dashboard.bind(control, chart);
		dashboard.draw(data);
	}
</script>
} 


@***

for(var i=0;i<@c.get.budgetHistory.length;i++){
			ar[i]=new Array(
					'@c.get.budgetHistory.map(_.date).head.toString',
					500);
		}; 


<div id="container" style="width: 100%; height: 400px;">qweqewqe</div>

$(document).ready(function() { 
var chart1 = new Highcharts.Chart({
	chart: { renderTo: 'container', type: 'bar' }, 
	title: { text: 'Fruit Consumption' }, 
	xAxis: { categories: ['Apples', 'Bananas', 'Oranges'] },
	yAxis: { title: { text: 'Fruit eaten' } }, 
	series: [
		{ name: 'Jane',	data: [1, 0, 4] }, 
		{ name: 'John', data: [5, 7, 3] }
		] 
	}); 
}); 

*@
